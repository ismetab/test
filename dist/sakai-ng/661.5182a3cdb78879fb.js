(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[661],{1285:(T,b,s)=>{"use strict";s.r(b),s.d(b,{SettingsModule:()=>N});var c=s(6814),v=s(3999),C=s(7426),p=s(3714),m=s(6223),f=s(846),u=s(217),e=s(9291),L=s(9770),n=s(5219),i=s(707),g=s(3965),a=s(4104),d=s(8857);function x(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"p-button",14),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.onLanguagePreferencesSubmit())}),e.ALo(1,"translate"),e.qZA()}2&o&&e.s9C("label",e.lcZ(1,1,"SAVE_LABEL"))}function y(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"p-button",16),e.NdJ("click",function(){const h=e.CHM(t).$implicit,A=e.oxw(2);return e.KtG(A.getAdminAttachment(h.id,h.fileName))}),e.qZA()()}if(2&o){const t=_.$implicit;e.xp6(1),e.s9C("label",t.fileName)}}function F(o,_){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,y,2,1,"div",15),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.emailAttachments)}}function Z(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"button",17),e.NdJ("click",function(){const h=e.CHM(t).$implicit,A=e.oxw(2);return e.KtG(A.deleteEmailDocument(h.id))}),e.qZA()()}if(2&o){const t=_.$implicit;e.xp6(1),e.hij(" ",t.fileName," ")}}function S(o,_){if(1&o&&(e.TgZ(0,"ul"),e.YNc(1,Z,3,1,"li",15),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.emailAttachments)}}function E(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"p-fileUpload",18,19),e.NdJ("uploadHandler",function(l){e.CHM(t);const h=e.MAs(1),A=e.oxw();return e.KtG(A.myUploadEmailDocumentsHandler(l,h))}),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e.qZA()}2&o&&(e.s9C("chooseLabel",e.lcZ(2,5,"CHOOSE")),e.s9C("uploadLabel",e.lcZ(3,7,"UPLOAD")),e.s9C("cancelLabel",e.lcZ(4,9,"CANCEL")),e.Q6J("multiple",!0)("maxFileSize",1e7))}const w=function(){return{position:"relative"}},M=function(){return{position:"absolute",top:"10px",right:"10px",cursor:"pointer"}};let U=(()=>{class o{constructor(t,r,l,h){this.fb=t,this.languageService=r,this.settingService=l,this.messageService=h,this.isLanguagePreferencesFormEditable=!1,this.isEmailAttachmentPreferencesFormEditable=!1}ngOnInit(){this.languagePreferencesForm=this.fb.group({languageOptions:["",m.kI.required]}),this.languagePreferencesForm.disable(),this.languageOptions=this.languageService.getAllPossibleLanguages(),this.loadUserDocuments()}editPreferencesForm(){this.isLanguagePreferencesFormEditable?(this.languagePreferencesForm.disable(),this.isLanguagePreferencesFormEditable=!1):(this.languagePreferencesForm.enable(),this.isLanguagePreferencesFormEditable=!0)}onLanguagePreferencesSubmit(){null!=this.selectedLanguage&&(console.log(this.selectedLanguage),this.languageService.changeLanguage(this.selectedLanguage))}onLanguageChange(t){this.selectedLanguage=t.value}editEmailAttachmentsForm(){this.isEmailAttachmentPreferencesFormEditable=!this.isEmailAttachmentPreferencesFormEditable}myUploadEmailDocumentsHandler(t,r){this.settingService.uploadDocuments(t.files).subscribe({next:l=>{console.log(l),this.log("success","Attachment saved successfully."),this.loadUserDocuments(),r.clear()},error:l=>{console.error("Error uploading attachment:",l),this.log("error","Failed to upload attachment.")}})}loadUserDocuments(){this.settingService.getEmailAttachmentsInfo().subscribe(t=>{this.emailAttachments=t.result},t=>{this.log("error","Failed to load attachment."),console.error("Error loading attachment:",t)})}deleteEmailDocument(t){this.settingService.deleteDocument(t).subscribe(()=>{this.emailAttachments=this.emailAttachments.filter(r=>r.id!==t),this.log("success","Removed attachment successfully.")},r=>{this.log("error","Failed to delete attachment."),console.error("Error deleting attachment:",r)})}log(t,r){this.messageService.add({severity:t,summary:r,detail:""})}getAdminAttachment(t,r){this.settingService.getEmailAttachment(t).subscribe(l=>{console.log(l),(0,u.saveAs)(l,r)},l=>{this.log("error","Failed to save attachment."),console.error("Error saving attachment:",l)})}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(m.qu),e.Y36(L.T),e.Y36(C.g),e.Y36(n.ez))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-admin-settings"]],decls:32,vars:24,consts:[[1,"grid","p-fluid"],[1,"col-12","md:col-6"],[1,"card",3,"ngStyle"],[1,"pi","pi-pencil",3,"ngStyle","click"],[3,"formGroup"],[1,"p-float-label"],["inputId","languages1","optionLabel","name","formControlName","languageOptions",3,"autoDisplayFirst","options","onChange"],["for","languages1"],[1,"grid","formgrid"],[1,"col-6","mb-2","lg:col-3","lg:mb-0"],[3,"label","click",4,"ngIf"],[1,"flex","flex-wrap","gap-2"],[4,"ngIf"],["customUpload","true","accept","application/pdf",3,"chooseLabel","uploadLabel","cancelLabel","multiple","maxFileSize","uploadHandler",4,"ngIf"],[3,"label","click"],[4,"ngFor","ngForOf"],["styleClass","p-button-link","icon","pi pi-paperclip",1,"left-aligned-label",3,"label","click"],[1,"p-button-rounded","p-button-danger","p-button-text","pi","pi-times",3,"click"],["customUpload","true","accept","application/pdf",3,"chooseLabel","uploadLabel","cancelLabel","multiple","maxFileSize","uploadHandler"],["form",""]],template:function(r,l){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"i",3),e.NdJ("click",function(){return l.editPreferencesForm()}),e.qZA(),e.TgZ(4,"form",4)(5,"h5"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"h5"),e.TgZ(9,"div")(10,"span",5)(11,"p-dropdown",6),e.NdJ("onChange",function(A){return l.onLanguageChange(A)}),e.qZA(),e.TgZ(12,"label",7),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e._UZ(15,"h5"),e.TgZ(16,"div")(17,"div",8)(18,"div",9),e.YNc(19,x,2,3,"p-button",10),e.qZA()()()()()(),e.TgZ(20,"div",1)(21,"div",2)(22,"i",3),e.NdJ("click",function(){return l.editEmailAttachmentsForm()}),e.qZA(),e.TgZ(23,"form")(24,"h5"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"div",11),e.YNc(28,F,2,1,"div",12),e.YNc(29,S,2,1,"ul",12),e.qZA(),e.YNc(30,E,5,11,"p-fileUpload",13),e.qZA()()(),e._UZ(31,"p-toast"),e.qZA()),2&r&&(e.xp6(2),e.Q6J("ngStyle",e.DdM(20,w)),e.xp6(1),e.Q6J("ngStyle",e.DdM(21,M)),e.xp6(1),e.Q6J("formGroup",l.languagePreferencesForm),e.xp6(2),e.Oqu(e.lcZ(7,14,"PREFERENCES_LABEL")),e.xp6(5),e.Q6J("autoDisplayFirst",!1)("options",l.languageOptions),e.xp6(2),e.Oqu(e.lcZ(14,16,"PLATFORM_LANGUAGE")),e.xp6(6),e.Q6J("ngIf",l.isLanguagePreferencesFormEditable),e.xp6(2),e.Q6J("ngStyle",e.DdM(22,w)),e.xp6(1),e.Q6J("ngStyle",e.DdM(23,M)),e.xp6(3),e.Oqu(e.lcZ(26,18,"EMAIL_ATTACHMENT_PREFERENCE_LABEL")),e.xp6(3),e.Q6J("ngIf",!l.isEmailAttachmentPreferencesFormEditable),e.xp6(1),e.Q6J("ngIf",l.isEmailAttachmentPreferencesFormEditable),e.xp6(1),e.Q6J("ngIf",l.isEmailAttachmentPreferencesFormEditable))},dependencies:[c.sg,c.O5,c.PC,m._Y,m.JJ,m.JL,m.F,m.sg,m.u,i.zx,g.Lt,a.FN,d.p,v.X$],encapsulation:2})}return o})(),O=(()=>{class o{static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[f.Bz.forChild([{path:"",component:U}]),f.Bz]})}return o})();var P=s(7853),D=s(4480);let N=(()=>{class o{static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({providers:[C.g],imports:[O,c.ez,v.aw,p.j,m.u5,m.UX,P.gz,D.T,i.hJ,g.kW,a.EV,d.O]})}return o})()},217:function(T,b){var s,v;void 0!==(v="function"==typeof(s=function(){"use strict";function p(n,i,g){var a=new XMLHttpRequest;a.open("GET",n),a.responseType="blob",a.onload=function(){L(a.response,i,g)},a.onerror=function(){console.error("could not download file")},a.send()}function m(n){var i=new XMLHttpRequest;i.open("HEAD",n,!1);try{i.send()}catch{}return 200<=i.status&&299>=i.status}function f(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}}var u="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,e=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),L=u.saveAs||("object"!=typeof window||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!e?function(n,i,g){var a=u.URL||u.webkitURL,d=document.createElement("a");d.download=i=i||n.name||"download",d.rel="noopener","string"==typeof n?(d.href=n,d.origin===location.origin?f(d):m(d.href)?p(n,i,g):f(d,d.target="_blank")):(d.href=a.createObjectURL(n),setTimeout(function(){a.revokeObjectURL(d.href)},4e4),setTimeout(function(){f(d)},0))}:"msSaveOrOpenBlob"in navigator?function(n,i,g){if(i=i||n.name||"download","string"!=typeof n)navigator.msSaveOrOpenBlob(function C(n,i){return typeof i>"u"?i={autoBom:!1}:"object"!=typeof i&&(console.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\ufeff",n],{type:n.type}):n}(n,g),i);else if(m(n))p(n,i,g);else{var a=document.createElement("a");a.href=n,a.target="_blank",setTimeout(function(){f(a)})}}:function(n,i,g,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof n)return p(n,i,g);var d="application/octet-stream"===n.type,x=/constructor/i.test(u.HTMLElement)||u.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||d&&x||e)&&typeof FileReader<"u"){var F=new FileReader;F.onloadend=function(){var E=F.result;E=y?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=E:location=E,a=null},F.readAsDataURL(n)}else{var Z=u.URL||u.webkitURL,S=Z.createObjectURL(n);a?a.location=S:location.href=S,a=null,setTimeout(function(){Z.revokeObjectURL(S)},4e4)}});u.saveAs=L.saveAs=L,T.exports=L})?s.apply(b,[]):s)&&(T.exports=v)},5865:(T,b,s)=>{"use strict";s.d(b,{t:()=>C});var c=s(9291),v=s(4713);let C=(()=>{class p extends v.s{static \u0275fac=function(){let f;return function(e){return(f||(f=c.n5z(p)))(e||p)}}();static \u0275cmp=c.Xpm({type:p,selectors:[["EyeIcon"]],standalone:!0,features:[c.qOj,c.jDz],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M0.0535499 7.25213C0.208567 7.59162 2.40413 12.4 7 12.4C11.5959 12.4 13.7914 7.59162 13.9465 7.25213C13.9487 7.2471 13.9506 7.24304 13.952 7.24001C13.9837 7.16396 14 7.08239 14 7.00001C14 6.91762 13.9837 6.83605 13.952 6.76001C13.9506 6.75697 13.9487 6.75292 13.9465 6.74788C13.7914 6.4084 11.5959 1.60001 7 1.60001C2.40413 1.60001 0.208567 6.40839 0.0535499 6.74788C0.0512519 6.75292 0.0494023 6.75697 0.048 6.76001C0.0163137 6.83605 0 6.91762 0 7.00001C0 7.08239 0.0163137 7.16396 0.048 7.24001C0.0494023 7.24304 0.0512519 7.2471 0.0535499 7.25213ZM7 11.2C3.664 11.2 1.736 7.92001 1.264 7.00001C1.736 6.08001 3.664 2.80001 7 2.80001C10.336 2.80001 12.264 6.08001 12.736 7.00001C12.264 7.92001 10.336 11.2 7 11.2ZM5.55551 9.16182C5.98308 9.44751 6.48576 9.6 7 9.6C7.68891 9.59789 8.349 9.32328 8.83614 8.83614C9.32328 8.349 9.59789 7.68891 9.59999 7C9.59999 6.48576 9.44751 5.98308 9.16182 5.55551C8.87612 5.12794 8.47006 4.7947 7.99497 4.59791C7.51988 4.40112 6.99711 4.34963 6.49276 4.44995C5.98841 4.55027 5.52513 4.7979 5.16152 5.16152C4.7979 5.52513 4.55027 5.98841 4.44995 6.49276C4.34963 6.99711 4.40112 7.51988 4.59791 7.99497C4.7947 8.47006 5.12794 8.87612 5.55551 9.16182ZM6.2222 5.83594C6.45243 5.6821 6.7231 5.6 7 5.6C7.37065 5.6021 7.72553 5.75027 7.98762 6.01237C8.24972 6.27446 8.39789 6.62934 8.4 7C8.4 7.27689 8.31789 7.54756 8.16405 7.77779C8.01022 8.00802 7.79157 8.18746 7.53575 8.29343C7.27994 8.39939 6.99844 8.42711 6.72687 8.37309C6.4553 8.31908 6.20584 8.18574 6.01005 7.98994C5.81425 7.79415 5.68091 7.54469 5.6269 7.27312C5.57288 7.00155 5.6006 6.72006 5.70656 6.46424C5.81253 6.20842 5.99197 5.98977 6.2222 5.83594Z","fill","currentColor"]],template:function(u,e){1&u&&(c.O4$(),c.TgZ(0,"svg",0),c._UZ(1,"path",1),c.qZA()),2&u&&(c.Tol(e.getClassNames()),c.uIk("aria-label",e.ariaLabel)("aria-hidden",e.ariaHidden)("role",e.role))},encapsulation:2})}return p})()}}]);