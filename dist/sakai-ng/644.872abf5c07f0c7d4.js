"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[644],{8574:(Z,h,r)=>{r.r(h),r.d(h,{SettingsModule:()=>J});var o=r(6814),u=r(3999),m=r(9862),g=r(553),b=r(2096),e=r(9291),p=r(9718);let d=(()=>{class a{constructor(s,t){this.http=s,this.messageService=t,this.changeUserPasswordUrl=g.N.apiUrl+g.N.changeUserPassword,this.httpOptions={headers:new m.WM({"Content-Type":"application/json"})}}changeUserPassword(s){return this.http.post(this.changeUserPasswordUrl,s)}handleError(s="operation",t){return n=>(console.error(n),this.log("Error",`${s} failed: ${n.message}`),(0,b.of)(t))}log(s,t){this.messageService.add(`SettingsService: ${t}`)}static#e=this.\u0275fac=function(t){return new(t||a)(e.LFG(m.eN),e.LFG(p.e))};static#s=this.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac})}return a})();var L=r(3714),i=r(6223),C=r(846);class M{constructor(f,s,t,n){this.email=f,this.oldPassword=s,this.newPassword=t,this.newPasswordAgain=n}}var T=r(5777),F=r(9770),_=r(5219),v=r(7853),A=r(707),S=r(3965),w=r(4104);function O(a,f){if(1&a){const s=e.EpF();e.TgZ(0,"p-button",17),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.onPasswordChangeSubmit())}),e.ALo(1,"translate"),e.qZA()}2&a&&e.s9C("label",e.lcZ(1,1,"SAVE_LABEL"))}function U(a,f){if(1&a){const s=e.EpF();e.TgZ(0,"p-button",17),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.onPreferencesSubmit())}),e.ALo(1,"translate"),e.qZA()}2&a&&e.s9C("label",e.lcZ(1,1,"SAVE_LABEL"))}const P=function(){return{position:"relative"}},E=function(){return{position:"absolute",top:"10px",right:"10px",cursor:"pointer"}};let N=(()=>{class a{constructor(s,t,n,l,c,x){this.fb=s,this.settingsService=t,this.authService=n,this.languageService=l,this.messageService=c,this.translate=x,this.isPasswordChangeEditable=!1,this.isPreferencesFormEditable=!1}ngOnInit(){this.passwordChangeForm=this.fb.group({oldPassword:["",i.kI.required],newPassword:["",i.kI.required],newPasswordAgain:["",i.kI.required]},{validator:this.checkIfMatching("newPassword","newPasswordAgain")}),this.passwordChangeForm.disable(),this.preferencesForm=this.fb.group({languageOptions:["",i.kI.required]}),this.preferencesForm.disable(),this.languageOptions=this.languageService.getAllPossibleLanguages()}editPasswordForm(){this.isPasswordChangeEditable?(this.passwordChangeForm.disable(),this.isPasswordChangeEditable=!1):(this.passwordChangeForm.enable(),this.isPasswordChangeEditable=!0)}onPasswordChangeSubmit(){if(this.passwordChangeForm.valid){this.userName=this.authService.getUser();const s=this.passwordChangeForm.value,t=new M(this.userName,s.oldPassword,s.newPassword,s.newPasswordAgain);this.settingsService.changeUserPassword(t).subscribe({next:n=>{console.log(n),this.addMessage("success")},error:n=>{console.error("There was an error in changing user password",n),this.addErrorMessage(n)}})}else{let s;this.translate.get("NEW_PASSWORD_AND_NEW_PASSWORD_AGAIN_NOT_MATCHED").subscribe(t=>{s=t}),this.messageService.add({severity:"error",summary:s,detail:""})}}editPreferencesForm(){this.isPreferencesFormEditable?(this.preferencesForm.disable(),this.isPreferencesFormEditable=!1):(this.preferencesForm.enable(),this.isPreferencesFormEditable=!0)}onPreferencesSubmit(){null!=this.selectedLanguage&&(console.log(this.selectedLanguage),this.languageService.changeLanguage(this.selectedLanguage))}onLanguageChange(s){this.selectedLanguage=s.value}checkIfMatching(s,t){return n=>{let c=n.controls[t];return n.controls[s].value!==c.value?c.setErrors({notMatching:!0}):null}}addMessage(s,t=""){let n;"success"===s?this.translate.get("CHANGE_USER_PASSWORD_SUCCESS_MESSAGE").subscribe(l=>{n=l}):this.translate.get("CHANGE_USER_PASSWORD_FAIL_MESSAGE").subscribe(l=>{n=l}),this.messageService.add({severity:s,summary:n,detail:t})}addErrorMessage(s){401!==s.error.result.code&&(this.messageService.clear(),this.addMessage("error",s.error.result.code+": "+s.error.result.description))}static#e=this.\u0275fac=function(t){return new(t||a)(e.Y36(i.qu),e.Y36(d),e.Y36(T.$),e.Y36(F.T),e.Y36(_.ez),e.Y36(u.sK))};static#s=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-user-settings"]],decls:54,vars:38,consts:[[1,"grid","p-fluid"],[1,"col-12","md:col-6"],[1,"card",3,"ngStyle"],[1,"pi","pi-pencil",3,"ngStyle","click"],[3,"formGroup"],[1,"p-float-label"],["id","oldPassword1","formControlName","oldPassword",3,"toggleMask","feedback"],["for","oldPassword1"],["id","newPassword1","formControlName","newPassword",3,"toggleMask","feedback"],["for","newPassword1"],["id","newPasswordAgain1","formControlName","newPasswordAgain",3,"toggleMask","feedback"],["for","newPasswordAgain1"],[1,"grid","formgrid"],[1,"col-6","mb-2","lg:col-3","lg:mb-0"],[3,"label","click",4,"ngIf"],["inputId","languages1","optionLabel","name","formControlName","languageOptions",3,"autoDisplayFirst","options","onChange"],["for","languages1"],[3,"label","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"i",3),e.NdJ("click",function(){return n.editPasswordForm()}),e.qZA(),e.TgZ(4,"form",4)(5,"h5"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"h5"),e.TgZ(9,"div")(10,"span",5),e._UZ(11,"p-password",6),e.TgZ(12,"label",7),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e._UZ(15,"h5"),e.TgZ(16,"div")(17,"span",5),e._UZ(18,"p-password",8),e.TgZ(19,"label",9),e._uU(20),e.ALo(21,"translate"),e.qZA()()(),e._UZ(22,"h5"),e.TgZ(23,"div")(24,"span",5),e._UZ(25,"p-password",10),e.TgZ(26,"label",11),e._uU(27),e.ALo(28,"translate"),e.qZA()()(),e._UZ(29,"h5"),e.TgZ(30,"div")(31,"div",12)(32,"div",13),e.YNc(33,O,2,3,"p-button",14),e.qZA()()()()()(),e.TgZ(34,"div",1)(35,"div",2)(36,"i",3),e.NdJ("click",function(){return n.editPreferencesForm()}),e.qZA(),e.TgZ(37,"form",4)(38,"h5"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e._UZ(41,"h5"),e.TgZ(42,"div")(43,"span",5)(44,"p-dropdown",15),e.NdJ("onChange",function(c){return n.onLanguageChange(c)}),e.qZA(),e.TgZ(45,"label",16),e._uU(46),e.ALo(47,"translate"),e.qZA()()(),e._UZ(48,"h5"),e.TgZ(49,"div")(50,"div",12)(51,"div",13),e.YNc(52,U,2,3,"p-button",14),e.qZA()()()()()(),e._UZ(53,"p-toast"),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngStyle",e.DdM(34,P)),e.xp6(1),e.Q6J("ngStyle",e.DdM(35,E)),e.xp6(1),e.Q6J("formGroup",n.passwordChangeForm),e.xp6(2),e.Oqu(e.lcZ(7,22,"PASSWORD_CHANGE_LABEL")),e.xp6(5),e.Q6J("toggleMask",!0)("feedback",!1),e.xp6(2),e.Oqu(e.lcZ(14,24,"OLD_PASSWORD_LABEL")),e.xp6(5),e.Q6J("toggleMask",!0)("feedback",!1),e.xp6(2),e.Oqu(e.lcZ(21,26,"NEW_PASSWORD_LABEL")),e.xp6(5),e.Q6J("toggleMask",!0)("feedback",!1),e.xp6(2),e.Oqu(e.lcZ(28,28,"NEW_PASSWORD_AGAIN_LABEL")),e.xp6(6),e.Q6J("ngIf",n.isPasswordChangeEditable),e.xp6(2),e.Q6J("ngStyle",e.DdM(36,P)),e.xp6(1),e.Q6J("ngStyle",e.DdM(37,E)),e.xp6(1),e.Q6J("formGroup",n.preferencesForm),e.xp6(2),e.Oqu(e.lcZ(40,30,"PREFERENCES_LABEL")),e.xp6(5),e.Q6J("autoDisplayFirst",!1)("options",n.languageOptions),e.xp6(2),e.Oqu(e.lcZ(47,32,"PLATFORM_LANGUAGE")),e.xp6(6),e.Q6J("ngIf",n.isPreferencesFormEditable))},dependencies:[o.O5,o.PC,i._Y,i.JJ,i.JL,i.sg,i.u,v.ro,A.zx,S.Lt,w.FN,u.X$],encapsulation:2})}return a})(),y=(()=>{class a{static#e=this.\u0275fac=function(t){return new(t||a)};static#s=this.\u0275mod=e.oAB({type:a});static#t=this.\u0275inj=e.cJS({imports:[C.Bz.forChild([{path:"",component:N}]),C.Bz]})}return a})();var D=r(4480);let J=(()=>{class a{static#e=this.\u0275fac=function(t){return new(t||a)};static#s=this.\u0275mod=e.oAB({type:a});static#t=this.\u0275inj=e.cJS({providers:[d],imports:[y,o.ez,u.aw,L.j,i.u5,i.UX,v.gz,D.T,A.hJ,S.kW,w.EV]})}return a})()},5865:(Z,h,r)=>{r.d(h,{t:()=>m});var o=r(9291),u=r(4713);let m=(()=>{class g extends u.s{static \u0275fac=function(){let e;return function(d){return(e||(e=o.n5z(g)))(d||g)}}();static \u0275cmp=o.Xpm({type:g,selectors:[["EyeIcon"]],standalone:!0,features:[o.qOj,o.jDz],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M0.0535499 7.25213C0.208567 7.59162 2.40413 12.4 7 12.4C11.5959 12.4 13.7914 7.59162 13.9465 7.25213C13.9487 7.2471 13.9506 7.24304 13.952 7.24001C13.9837 7.16396 14 7.08239 14 7.00001C14 6.91762 13.9837 6.83605 13.952 6.76001C13.9506 6.75697 13.9487 6.75292 13.9465 6.74788C13.7914 6.4084 11.5959 1.60001 7 1.60001C2.40413 1.60001 0.208567 6.40839 0.0535499 6.74788C0.0512519 6.75292 0.0494023 6.75697 0.048 6.76001C0.0163137 6.83605 0 6.91762 0 7.00001C0 7.08239 0.0163137 7.16396 0.048 7.24001C0.0494023 7.24304 0.0512519 7.2471 0.0535499 7.25213ZM7 11.2C3.664 11.2 1.736 7.92001 1.264 7.00001C1.736 6.08001 3.664 2.80001 7 2.80001C10.336 2.80001 12.264 6.08001 12.736 7.00001C12.264 7.92001 10.336 11.2 7 11.2ZM5.55551 9.16182C5.98308 9.44751 6.48576 9.6 7 9.6C7.68891 9.59789 8.349 9.32328 8.83614 8.83614C9.32328 8.349 9.59789 7.68891 9.59999 7C9.59999 6.48576 9.44751 5.98308 9.16182 5.55551C8.87612 5.12794 8.47006 4.7947 7.99497 4.59791C7.51988 4.40112 6.99711 4.34963 6.49276 4.44995C5.98841 4.55027 5.52513 4.7979 5.16152 5.16152C4.7979 5.52513 4.55027 5.98841 4.44995 6.49276C4.34963 6.99711 4.40112 7.51988 4.59791 7.99497C4.7947 8.47006 5.12794 8.87612 5.55551 9.16182ZM6.2222 5.83594C6.45243 5.6821 6.7231 5.6 7 5.6C7.37065 5.6021 7.72553 5.75027 7.98762 6.01237C8.24972 6.27446 8.39789 6.62934 8.4 7C8.4 7.27689 8.31789 7.54756 8.16405 7.77779C8.01022 8.00802 7.79157 8.18746 7.53575 8.29343C7.27994 8.39939 6.99844 8.42711 6.72687 8.37309C6.4553 8.31908 6.20584 8.18574 6.01005 7.98994C5.81425 7.79415 5.68091 7.54469 5.6269 7.27312C5.57288 7.00155 5.6006 6.72006 5.70656 6.46424C5.81253 6.20842 5.99197 5.98977 6.2222 5.83594Z","fill","currentColor"]],template:function(p,d){1&p&&(o.O4$(),o.TgZ(0,"svg",0),o._UZ(1,"path",1),o.qZA()),2&p&&(o.Tol(d.getClassNames()),o.uIk("aria-label",d.ariaLabel)("aria-hidden",d.ariaHidden)("role",d.role))},encapsulation:2})}return g})()}}]);