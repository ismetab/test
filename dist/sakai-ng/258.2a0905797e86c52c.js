"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[258],{8258:(E,C,s)=>{s.r(C),s.d(C,{AllCompaniesModule:()=>j});var u=s(6814),i=s(6223),f=s(9232),A=s(707),v=s(3714),x=s(6804),h=s(4480),y=s(4055),r=s(3965),_=s(6651),p=s(4104),g=s(7902),d=s(6022),M=s(9246),N=s(7213),T=s(846),b=s(5219),e=s(9291),S=s(888),Z=s(3999);const O=["filter"];function w(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div",20)(1,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),l=e.MAs(7);return e.KtG(o.clear(l))}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"span",22),e._UZ(4,"i",23),e.TgZ(5,"input",24,25),e.NdJ("input",function(o){e.CHM(t);const l=e.oxw(),m=e.MAs(7);return e.KtG(l.onGlobalFilter(m,o))}),e.ALo(7,"translate"),e.qZA()()()}2&n&&(e.xp6(1),e.s9C("label",e.lcZ(2,2,"CLEAR")),e.xp6(4),e.s9C("placeholder",e.lcZ(7,4,"SEARCH_KEYWORD_LABEL")))}function I(n,c){1&n&&(e.TgZ(0,"tr")(1,"th",26)(2,"div",27),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"th",28)(6,"div",27),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"th",29)(10,"div",27),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"th")(14,"div",27),e._uU(15),e.ALo(16,"translate"),e.qZA()()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,4,"COMPANY_NAME")," "),e.xp6(4),e.hij(" ",e.lcZ(8,6,"COMPANY_EMAIL")," "),e.xp6(4),e.hij(" ",e.lcZ(12,8,"COMPANY_ADDRESS")," "),e.xp6(4),e.hij(" ",e.lcZ(16,10,"ACTIONS")," "))}function J(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"span",30),e._uU(5),e.qZA()(),e.TgZ(6,"td")(7,"span",30),e._uU(8),e.qZA()(),e.TgZ(9,"td")(10,"div")(11,"span",31)(12,"button",32),e.NdJ("click",function(){const l=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.openCompanySidebar(l))}),e.qZA(),e.TgZ(13,"button",33),e.NdJ("click",function(){const l=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.deleteCompany(l))}),e.qZA()()()()()}if(2&n){const t=c.$implicit;e.xp6(2),e.hij(" ",t.name," "),e.xp6(3),e.Oqu(t.email),e.xp6(3),e.Oqu(t.address)}}function U(n,c){1&n&&(e.TgZ(0,"tr")(1,"td",34),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"COMPANIES_NOT_FOUND")))}function q(n,c){1&n&&(e.TgZ(0,"tr")(1,"td",34),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"COMPANIES_LOADING")))}function Y(n,c){if(1&n&&(e.TgZ(0,"div",35),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.selectedCompany.name)}}function L(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"input",36),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedCompany.name=o)}),e.qZA()}if(2&n){const t=e.oxw();e.Akn(t.company_input),e.Q6J("ngModel",t.selectedCompany.name)}}function k(n,c){if(1&n&&(e.TgZ(0,"div",35),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.selectedCompany.email)}}function B(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"input",36),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedCompany.email=o)}),e.qZA()}if(2&n){const t=e.oxw();e.Akn(t.company_input),e.Q6J("ngModel",t.selectedCompany.email)}}function P(n,c){if(1&n&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.selectedCompany.address)}}function F(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"textarea",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedCompany.address=o)}),e.qZA()}if(2&n){const t=e.oxw();e.Akn(t.company_textarea),e.Q6J("ngModel",t.selectedCompany.address)}}function D(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div",31)(1,"button",39),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onUpdateCompanyClick(o.selectedCompany))}),e.qZA(),e.TgZ(2,"button",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleEditMode())}),e.qZA()()}}function H(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div",31)(1,"button",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveCompany())}),e.qZA(),e.TgZ(2,"button",42),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.discardChanges())}),e.qZA()()}}const G=function(){return["name","country.name","representative.name","status"]};let K=(()=>{class n{constructor(t,a,o){this.companyService=t,this.translate=a,this.messageService=o,this.companySidebar=!1,this.isEditMode=!1,this.companySidebarStyles={height:"60%",width:"60%",left:"20%","border-radius":"15px"},this.company_input={width:"100%",padding:"8px","box-sizing":"border-box"},this.company_textarea={height:"150px",width:"100%"},this.companies=[],this.loading=!0,this.selectedCompany={id:0,name:"",email:"",address:""}}ngOnInit(){this.companyService.fetchAllCompanies().subscribe({next:t=>{console.log(t),this.companies=t.result,this.loading=!1},error:t=>{console.error("There was an error!",t)}})}clear(t){t.clear(),this.filter.nativeElement.value=""}toggleEditMode(){this.isEditMode=!this.isEditMode}saveCompany(){this.toggleEditMode()}discardChanges(){this.toggleEditMode()}openCompanySidebar(t){this.selectedCompany=t,console.log(this.selectedCompany),this.companySidebar=!0}onUpdateCompanyClick(t){this.companyService.updateCompany(t).subscribe({next:a=>{console.log(a)},error:a=>{console.error("There was an error! in updating company",a)}}),window.location.reload()}deleteCompany(t){this.companyService.deleteCompany(t.id).subscribe(()=>{this.addMessage("success"),this.companies=this.companies.filter(a=>a.id!==t.id)},a=>{console.error("Error deleting company:",a),this.addErrorMessage(a)})}addMessage(t,a=""){let o;"success"===t?this.translate.get("REMOVE_COMPANY_SUCCESS_MESSAGE").subscribe(l=>{o=l}):this.translate.get("REMOVE_COMPANY_FAIL_MESSAGE").subscribe(l=>{o=l}),this.messageService.add({severity:t,summary:o,detail:a})}addErrorMessage(t){401!==t.error.result.code&&(this.messageService.clear(),this.addMessage("error",t.error.result.code+": "+t.error.result.description))}static#e=this.\u0275fac=function(a){return new(a||n)(e.Y36(S.J),e.Y36(Z.sK),e.Y36(b.ez))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(a,o){if(1&a&&e.Gf(O,5),2&a){let l;e.iGM(l=e.CRH())&&(o.filter=l.first)}},features:[e._Bn([b.ez,b.YP])],decls:43,vars:34,consts:[[1,"grid"],[1,"col-12"],[1,"card"],["dataKey","id","styleClass","p-datatable-gridlines","responsiveLayout","scroll",3,"value","rows","loading","rowHover","paginator","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],["position","bottom","modal","false",3,"visible","baseZIndex","visibleChange"],[1,"mail-title"],[1,"mail-section"],[1,"mail-label"],["class","mail-content",4,"ngIf","ngIfElse"],["editCompanyName",""],["editEmail",""],["class","mail-body",4,"ngIf","ngIfElse"],["editAddress",""],["class","p-buttonset",4,"ngIf"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","icon","pi pi-filter-slash",1,"p-button-outlined","mb-2",3,"label","click"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full",3,"placeholder","input"],["filter",""],[2,"min-width","12rem"],[1,"flex","justify-content-between","align-items-center"],[2,"min-width","14rem"],[2,"min-width","10rem"],[1,"image-text","ml-2"],[1,"p-buttonset"],["pButton","","type","button","icon","pi pi-pencil",1,"p-button-raised","p-button-info",3,"click"],["pButton","","type","button","icon","pi pi-trash",1,"p-button-raised","p-button-info",3,"click"],["colspan","8"],[1,"mail-content"],["type","text",3,"ngModel","ngModelChange"],[1,"mail-body"],[3,"ngModel","ngModelChange"],["pButton","","pRipple","","label","Sent","icon","pi pi-check",3,"click"],["pButton","","pRipple","","label","Edit","icon","pi pi-pencil",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",3,"click"],["pButton","","pRipple","","label","Discard","icon","pi pi-times",3,"click"]],template:function(a,o){if(1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"p-table",3,4),e.YNc(8,w,8,6,"ng-template",5),e.YNc(9,I,17,12,"ng-template",6),e.YNc(10,J,14,3,"ng-template",7),e.YNc(11,U,4,3,"ng-template",8),e.YNc(12,q,4,3,"ng-template",9),e.qZA(),e._UZ(13,"p-toast"),e.qZA()(),e.TgZ(14,"p-sidebar",10),e.NdJ("visibleChange",function(m){return o.companySidebar=m}),e.TgZ(15,"div",2)(16,"h3",11),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"div",12)(20,"label",13),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.YNc(23,Y,2,1,"div",14),e.YNc(24,L,1,3,"ng-template",null,15,e.W1O),e.qZA(),e.TgZ(26,"div",12)(27,"label",13),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.YNc(30,k,2,1,"div",14),e.YNc(31,B,1,3,"ng-template",null,16,e.W1O),e.qZA(),e.TgZ(33,"div",12)(34,"label",13),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.YNc(37,P,2,1,"div",17),e.YNc(38,F,1,3,"ng-template",null,18,e.W1O),e.qZA(),e._UZ(40,"br"),e.YNc(41,D,3,0,"div",19),e.YNc(42,H,3,0,"div",19),e.qZA()()()),2&a){const l=e.MAs(25),m=e.MAs(32),R=e.MAs(39);e.xp6(4),e.Oqu(e.lcZ(5,23,"FILTER_MENU")),e.xp6(2),e.Q6J("value",o.companies)("rows",10)("loading",o.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",e.DdM(33,G)),e.xp6(8),e.Akn(o.companySidebarStyles),e.Q6J("visible",o.companySidebar)("baseZIndex",1e4),e.xp6(3),e.Oqu(e.lcZ(18,25,"COMPANIES_DETAILS")),e.xp6(4),e.Oqu(e.lcZ(22,27,"COMPANY_NAME")),e.xp6(2),e.Q6J("ngIf",!o.isEditMode)("ngIfElse",l),e.xp6(5),e.Oqu(e.lcZ(29,29,"COMPANY_EMAIL")),e.xp6(2),e.Q6J("ngIf",!o.isEditMode)("ngIfElse",m),e.xp6(5),e.Oqu(e.lcZ(36,31,"COMPANY_ADDRESS")),e.xp6(2),e.Q6J("ngIf",!o.isEditMode)("ngIfElse",R),e.xp6(4),e.Q6J("ngIf",!o.isEditMode),e.xp6(1),e.Q6J("ngIf",o.isEditMode)}},dependencies:[u.O5,i.Fj,i.JJ,i.On,f.iA,b.jx,A.Hq,v.o,h.H,p.FN,M.Y,Z.X$],encapsulation:2})}return n})(),Q=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[T.Bz.forChild([{path:"",component:K}]),T.Bz]})}return n})(),j=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[u.ez,Q,i.u5,f.U$,d.Xt,A.hJ,g.JH,v.j,x.KZ,h.T,y.q4,r.kW,_.q,p.EV,M.l,N.S,Z.aw]})}return n})()},6651:(E,C,s)=>{s.d(C,{k:()=>h,q:()=>y});var u=s(6814),i=s(9291);function f(r,_){if(1&r&&(i.TgZ(0,"div",5),i._uU(1),i.qZA()),2&r){const p=i.oxw(2);i.Udp("display",null!=p.value&&0!==p.value?"flex":"none"),i.xp6(1),i.AsE("",p.value,"",p.unit,"")}}function A(r,_){if(1&r&&(i.TgZ(0,"div",3),i.YNc(1,f,2,4,"div",4),i.qZA()),2&r){const p=i.oxw();i.Udp("width",p.value+"%")("background",p.color),i.xp6(1),i.Q6J("ngIf",p.showValue)}}function v(r,_){if(1&r&&(i.TgZ(0,"div",6),i._UZ(1,"div",7),i.qZA()),2&r){const p=i.oxw();i.xp6(1),i.Udp("background",p.color)}}const x=function(r,_){return{"p-progressbar p-component":!0,"p-progressbar-determinate":r,"p-progressbar-indeterminate":_}};let h=(()=>{class r{value;showValue=!0;styleClass;style;unit="%";mode="determinate";color;static \u0275fac=function(g){return new(g||r)};static \u0275cmp=i.Xpm({type:r,selectors:[["p-progressBar"]],hostAttrs:[1,"p-element"],inputs:{value:"value",showValue:"showValue",styleClass:"styleClass",style:"style",unit:"unit",mode:"mode",color:"color"},decls:3,vars:10,consts:[["role","progressbar","aria-valuemin","0","aria-valuemax","100",3,"ngStyle","ngClass"],["class","p-progressbar-value p-progressbar-value-animate","style","display:flex",3,"width","background",4,"ngIf"],["class","p-progressbar-indeterminate-container",4,"ngIf"],[1,"p-progressbar-value","p-progressbar-value-animate",2,"display","flex"],["class","p-progressbar-label",3,"display",4,"ngIf"],[1,"p-progressbar-label"],[1,"p-progressbar-indeterminate-container"],[1,"p-progressbar-value","p-progressbar-value-animate"]],template:function(g,d){1&g&&(i.TgZ(0,"div",0),i.YNc(1,A,2,5,"div",1),i.YNc(2,v,2,2,"div",2),i.qZA()),2&g&&(i.Tol(d.styleClass),i.Q6J("ngStyle",d.style)("ngClass",i.WLB(7,x,"determinate"===d.mode,"indeterminate"===d.mode)),i.uIk("aria-valuenow",d.value),i.xp6(1),i.Q6J("ngIf","determinate"===d.mode),i.xp6(1),i.Q6J("ngIf","indeterminate"===d.mode))},dependencies:[u.mk,u.O5,u.PC],styles:['.p-progressbar{position:relative;overflow:hidden}.p-progressbar-determinate .p-progressbar-value{height:100%;width:0%;position:absolute;display:none;border:0 none;display:flex;align-items:center;justify-content:center;overflow:hidden}.p-progressbar-determinate .p-progressbar-label{display:inline-flex}.p-progressbar-determinate .p-progressbar-value-animate{transition:width 1s ease-in-out}.p-progressbar-indeterminate .p-progressbar-value:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite}.p-progressbar-indeterminate .p-progressbar-value:after{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation-delay:1.15s}@keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}\n'],encapsulation:2,changeDetection:0})}return r})(),y=(()=>{class r{static \u0275fac=function(g){return new(g||r)};static \u0275mod=i.oAB({type:r});static \u0275inj=i.cJS({imports:[u.ez]})}return r})()}}]);